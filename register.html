<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Create Account | Carders Hub</title>
  <link rel="stylesheet" href="login.css"> <!-- reuse same styles so UI matches -->
</head>
<body>
  <header class="navbar">
    <div class="logo">ðŸ‘œ CARDERS HUB</div>
    <nav>
      <a href="index.html">Home</a>
      <a href="login.html">Login</a>
    </nav>
  </header>

  <div class="login-container">
    <h2>Create Account</h2>
    <form id="regForm">
      <div class="input-group">
        <label for="fullname">Full name</label>
        <input type="text" id="fullname" placeholder="Your full name" required>
      </div>

      <div class="input-group">
        <label for="rusername">Username</label>
        <input type="text" id="rusername" placeholder="Choose a username" required>
      </div>

      <div class="input-group">
        <label for="rpassword">Password</label>
        <input type="password" id="rpassword" placeholder="Choose a password" required>
      </div>

      <button type="submit" class="btn">Create Account</button>
      <p class="account-text">Already have an account? <a href="login.html">Login</a></p>
    </form>
  </div>

<script>
/*
  Register script:
  - Validates username uniqueness
  - Adds user to localStorage 'users'
  - Logs in the new user (sets currentUser) and redirects to index.html
*/
document.getElementById('regForm').addEventListener('submit', function(e){
  e.preventDefault();
  const fullname = document.getElementById('fullname').value.trim();
  const username = document.getElementById('rusername').value.trim();
  const password = document.getElementById('rpassword').value;

  if(!username || !password){
    alert('Please fill username and password');
    return;
  }

  const key = 'users';
  const users = JSON.parse(localStorage.getItem(key) || '[]');

  if(users.find(u => u.username === username)){
    alert('Username already taken. Choose another.');
    return;
  }

  const newUser = { username, password, isAdmin: false, fullName: fullname || username, banned: false };
  users.push(newUser);
  localStorage.setItem(key, JSON.stringify(users));
  localStorage.setItem('currentUser', JSON.stringify(newUser));
  alert('Account created â€” you are now logged in');
  window.location.href = 'index.html';
});
</script>
</body>
</html>
